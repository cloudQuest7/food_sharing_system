<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShareBites - My Requests</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?display=swap&family=Epilogue:wght@400;500;700;900&family=Noto+Sans:wght@400;500;700;900" />
    <style>
        body {
            font-family: Epilogue, "Noto Sans", sans-serif;
            background-color: #fcfaf8;
        }
    </style>
</head>
<body>
    <div class="flex">
        <!-- Sidebar -->
        <div class="w-64 h-screen bg-white border-r border-[#e8dbce] fixed flex flex-col justify-between">
            <div class="p-6">
                <div class="flex items-center gap-4 text-[#1c140d] mb-8">
                    <div class="size-4">
                        <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.57829 8.57829C5.52816 11.6284 3.451 15.5145 2.60947 19.7452C1.76794 23.9758 2.19984 28.361 3.85056 32.3462C5.50128 36.3314 8.29667 39.7376 11.8832 42.134C15.4698 44.5305 19.6865 45.8096 24 45.8096C28.3135 45.8096 32.5302 44.5305 36.1168 42.134C39.7033 39.7375 42.4987 36.3314 44.1494 32.3462C45.8002 28.361 46.2321 23.9758 45.3905 19.7452C44.549 15.5145 42.4718 11.6284 39.4217 8.57829L24 24L8.57829 8.57829Z" fill="currentColor"></path>
                        </svg>
                    </div>
                    <h2 class="text-[#1c140d] text-lg font-bold leading-tight tracking-[-0.015em]">ShareBites</h2>
                </div>
                <nav class="space-y-4">
                    <a href="/recipient/dashboard" class="block px-4 py-2 text-[#1c140d] hover:bg-[#fcfaf8] rounded-lg font-medium">Dashboard</a>
                    <a href="/recipient/browse" class="block px-4 py-2 text-[#1c140d] hover:bg-[#fcfaf8] rounded-lg font-medium">Browse Food</a>
                    <a href="/recipient/my-requests" class="block px-4 py-2 bg-[#f2800d] text-white rounded-lg font-medium">My Requests</a>
                    <a href="/recipient/saved" class="block px-4 py-2 text-[#1c140d] hover:bg-[#fcfaf8] rounded-lg font-medium">Saved Items</a>
                    <a href="/recipient/profile" class="block px-4 py-2 text-[#1c140d] hover:bg-[#fcfaf8] rounded-lg font-medium">Profile</a>
                </nav>
            </div>
            
            <!-- Profile Section -->
            <div class="p-6 border-t border-[#e8dbce]">
                <div class="flex items-center gap-3">
                    <img src="https://ui-avatars.com/api/?name=<%= user.name %>&background=f2800d&color=fff" 
                         alt="<%= user.name %>'s profile" 
                         class="w-10 h-10 rounded-full border-2 border-[#f2800d]"/>
                    <div>
                        <p class="text-[#1c140d] font-bold"><%= user.name %></p>
                        <p class="text-[#9c7349] text-sm">Food Recipient</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="ml-64 flex-1 p-8">
            <!-- Header -->
            <div class="mb-8">
                <div class="flex justify-between items-center mb-4">
                    <h1 class="text-[#1c140d] text-4xl font-black leading-tight tracking-[-0.033em]">My Requests</h1>
                    <a href="/recipient/dashboard" class="text-[#f2800d] hover:underline flex items-center gap-1">
                        <span>‚Üê</span> Back to Dashboard
                    </a>
                </div>
                <p class="text-[#9c7349] text-lg">Track and manage your food requests</p>
            </div>

            <!-- Success Message (conditionally shown) -->
            <% if (typeof requestSubmitted !== 'undefined' && requestSubmitted) { %>
            <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mb-8 flex justify-between items-center">
                <div class="flex items-center">
                    <svg class="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    <p>Your request was submitted successfully! The donor will review it shortly.</p>
                </div>
                <button class="text-green-700 hover:text-green-900 focus:outline-none" onclick="this.parentElement.style.display='none'">
                    <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            <% } %>

            <!-- Requests Tabs -->
            <div class="border-b border-[#e8dbce] mb-6">
                <div class="flex gap-8">
                    <button class="text-[#f2800d] border-b-2 border-[#f2800d] pb-3 font-bold">
                        Active (2)
                    </button>
                    <button class="text-[#9c7349] pb-3 font-bold hover:text-[#f2800d]">
                        Past Requests (5)
                    </button>
                </div>
            </div>

            <!-- Active Requests -->
            <div class="space-y-6 mb-8">
                <!-- Request Item 1 -->
                <div class="bg-white p-6 rounded-xl border border-[#e8dbce] hover:border-[#f2800d] transition-colors">
                    <div class="flex justify-between items-start">
                        <div class="flex gap-4">
                            <div class="w-20 h-20 bg-[#fcfaf8] rounded-lg flex items-center justify-center shrink-0">
                                <span class="text-3xl">ü•ï</span>
                            </div>
                            <div>
                                <h3 class="font-bold text-[#1c140d] text-lg">Fresh Vegetables</h3>
                                <p class="text-[#9c7349] mb-2">Requested from Local Farm (2.5 km away)</p>
                                <div class="flex gap-4 text-sm text-[#9c7349]">
                                    <p>üì¶ Quantity: All available</p>
                                    <p>‚è∞ Pickup: Today</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col items-end">
                            <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-bold mb-2">Pending</span>
                            <span class="text-[#9c7349] text-sm">Requested 2 hours ago</span>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-[#e8dbce] flex justify-between items-center">
                        <div class="text-[#9c7349]">
                            <p>The donor has not responded yet. They will contact you soon.</p>
                        </div>
                        <div class="flex gap-2">
                            <button class="px-4 py-2 border border-[#e8dbce] text-[#1c140d] rounded-full font-bold hover:border-[#f2800d] transition-colors">
                                Cancel
                            </button>
                            <button class="px-4 py-2 bg-[#f2800d] text-white rounded-full font-bold hover:bg-[#e67600] transition-colors">
                                Contact
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Request Item 2 -->
                <div class="bg-white p-6 rounded-xl border border-[#e8dbce] hover:border-[#f2800d] transition-colors">
                    <div class="flex justify-between items-start">
                        <div class="flex gap-4">
                            <div class="w-20 h-20 bg-[#fcfaf8] rounded-lg flex items-center justify-center shrink-0">
                                <span class="text-3xl">üçé</span>
                            </div>
                            <div>
                                <h3 class="font-bold text-[#1c140d] text-lg">Fresh Fruits</h3>
                                <p class="text-[#9c7349] mb-2">Requested from Local Market (3.2 km away)</p>
                                <div class="flex gap-4 text-sm text-[#9c7349]">
                                    <p>üì¶ Quantity: About half</p>
                                    <p>‚è∞ Pickup: Tomorrow</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col items-end">
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-bold mb-2">Accepted</span>
                            <span class="text-[#9c7349] text-sm">Requested 1 day ago</span>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-[#e8dbce] flex justify-between items-center">
                        <div class="text-[#9c7349]">
                            <p>Your request has been accepted. Please pick up the food tomorrow at 2:00 PM.</p>
                        </div>
                        <div class="flex gap-2">
                            <button class="px-4 py-2 border border-[#e8dbce] text-[#1c140d] rounded-full font-bold hover:border-[#f2800d] transition-colors">
                                Cancel
                            </button>
                            <button class="px-4 py-2 bg-[#f2800d] text-white rounded-full font-bold hover:bg-[#e67600] transition-colors">
                                Contact
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- If there was a new request submitted, show it at the top -->
                <% if (typeof requestSubmitted !== 'undefined' && requestSubmitted) { %>
                <div class="bg-white p-6 rounded-xl border border-[#f2800d] hover:border-[#f2800d] transition-colors">
                    <div class="flex justify-between items-start">
                        <div class="flex gap-4">
                            <div class="w-20 h-20 bg-[#fcfaf8] rounded-lg flex items-center justify-center shrink-0">
                                <span class="text-3xl">üç≤</span>
                            </div>
                            <div>
                                <h3 class="font-bold text-[#1c140d] text-lg">New Food Request</h3>
                                <p class="text-[#9c7349] mb-2">Your request was just submitted</p>
                                <div class="flex gap-4 text-sm text-[#9c7349]">
                                    <p>üì¶ Status: Processing</p>
                                    <p>‚è∞ Just now</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col items-end">
                            <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-bold mb-2">Processing</span>
                            <span class="text-[#9c7349] text-sm">Just now</span>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-[#e8dbce] flex justify-between items-center">
                        <div class="text-[#9c7349]">
                            <p>We're processing your request. The donor will be notified shortly.</p>
                        </div>
                        <div class="flex gap-2">
                            <button class="px-4 py-2 border border-[#e8dbce] text-[#1c140d] rounded-full font-bold hover:border-[#f2800d] transition-colors">
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
                <% } %>
            </div>

            <!-- No Requests Placeholder (hidden by default) -->
            <div class="hidden bg-white p-8 rounded-xl border border-[#e8dbce] text-center">
                <div class="w-20 h-20 bg-[#fcfaf8] rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-3xl">üìã</span>
                </div>
                <h3 class="font-bold text-[#1c140d] text-xl mb-2">No active requests</h3>
                <p class="text-[#9c7349] mb-6 max-w-md mx-auto">You don't have any active food requests. Browse available food to make a request.</p>
                <a href="/recipient/browse" class="px-6 py-3 bg-[#f2800d] text-white rounded-full font-bold hover:bg-[#e67600] transition-colors inline-block">
                    Browse Available Food
                </a>
            </div>
        </div>
    </div>
</body>
</html> 